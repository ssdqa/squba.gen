<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Patient Facts per Visit Type — loop_through_visits • squba.gen</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Patient Facts per Visit Type — loop_through_visits"><meta name="description" content="This function will loop through each site and visit type provided and execute
the provided check function to compute facts stratified by visit type. Primarily intended
for use in the Patient Facts module, but can be adapted for use elsewhere."><meta property="og:description" content="This function will loop through each site and visit type provided and execute
the provided check function to compute facts stratified by visit type. Primarily intended
for use in the Patient Facts module, but can be adapted for use elsewhere."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">squba.gen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="external-link nav-link" href="https://ssdqa.github.io/squba/">squba Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ssdqa/squba.gen/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Patient Facts per Visit Type</h1>
      <small class="dont-index">Source: <a href="https://github.com/ssdqa/squba.gen/blob/main/R/fact_loops.R" class="external-link"><code>R/fact_loops.R</code></a></small>
      <div class="d-none name"><code>loop_through_visits.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will loop through each site and visit type provided and execute
the provided check function to compute facts stratified by visit type. Primarily intended
for use in the Patient Facts module, but can be adapted for use elsewhere.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">loop_through_visits</span><span class="op">(</span></span>
<span>  <span class="va">cohort_tbl</span>,</span>
<span>  <span class="va">omop_or_pcornet</span>,</span>
<span>  <span class="va">check_func</span>,</span>
<span>  <span class="va">site_col</span>,</span>
<span>  time <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">visit_type_tbl</span>,</span>
<span>  <span class="va">visit_tbl</span>,</span>
<span>  <span class="va">site_list</span>,</span>
<span>  visit_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outpatient"</span>, <span class="st">"inpatient"</span><span class="op">)</span>,</span>
<span>  <span class="va">domain_tbl</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cohort-tbl">cohort_tbl<a class="anchor" aria-label="anchor" href="#arg-cohort-tbl"></a></dt>
<dd><p><em>tabular input</em> || <strong>required</strong></p>
<p>The cohort to be used for data quality testing. This table should contain,
at minimum:</p><ul><li><p><code>site</code> | <em>character</em> | the name(s) of institutions included in your cohort</p></li>
<li><p><code>person_id</code> / <code>patid</code> | <em>integer</em> / <em>character</em> | the patient identifier</p></li>
<li><p><code>start_date</code> | <em>date</em> | the start of the cohort period</p></li>
<li><p><code>end_date</code> | <em>date</em> | the end of the cohort period</p></li>
</ul><p>Note that the start and end dates included in this table will be used to
limit the search window for the analyses in this module. It is recommended that
this table has been passed through the <a href="prepare_cohort.html">prepare_cohort</a> function as well.</p></dd>


<dt id="arg-omop-or-pcornet">omop_or_pcornet<a class="anchor" aria-label="anchor" href="#arg-omop-or-pcornet"></a></dt>
<dd><p><em>string</em> || <strong>required</strong></p>
<p>A string, either <code>omop</code> or <code>pcornet</code>, indicating the CDM format of the data</p><ul><li><p><code>omop</code>: run the <code><a href="loop_through_visits_omop.html">loop_through_visits_omop()</a></code> function against an OMOP CDM instance</p></li>
<li><p><code>pcornet</code>: run the <code><a href="loop_through_visits_pcnt.html">loop_through_visits_pcnt()</a></code> function against a PCORnet CDM instance</p></li>
</ul></dd>


<dt id="arg-check-func">check_func<a class="anchor" aria-label="anchor" href="#arg-check-func"></a></dt>
<dd><p><em>function</em> || <strong>required</strong></p>
<p>The function that should be executed within each time period in the loop. This
parameter should be structured as the following, where <code>cht</code> is the cohort table
and <code>t</code> is the input data for the function:</p>
<p><code>function(cht, t){check_function(param1 = cht, param2 = t, param3 = param3_input, ..., paramX = paramX_input)}</code></p>
<p>Make sure to include all parameters required for the original function where
default values are not being used.</p></dd>


<dt id="arg-site-col">site_col<a class="anchor" aria-label="anchor" href="#arg-site-col"></a></dt>
<dd><p><em>string</em> || <strong>required</strong></p>
<p>The name of the column in the cohort table that contains the site names. This
will typically be either <code>site</code> or <code>site_summ</code></p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p><em>boolean</em> || defaults to <code>FALSE</code></p>
<p>A boolean to indicate whether to execute a longitudinal analysis</p></dd>


<dt id="arg-visit-type-tbl">visit_type_tbl<a class="anchor" aria-label="anchor" href="#arg-visit-type-tbl"></a></dt>
<dd><p><em>tabular input</em> || <strong>required</strong></p>
<p>A table that defines visit types of interest called in <code>visit_list.</code> This input
should contain:</p><ul><li><p><code>visit_concept_id</code> / <code>visit_detail_concept_id</code> or <code>enc_type</code> | <em>integer</em> or <em>character</em> | the <code>visit_(detail)_concept_id</code> or <code>enc_type</code> that represents the visit type of interest (i.e. 9201 or IP)</p></li>
<li><p><code>visit_type</code> | <em>character</em> | the string label to describe the visit type</p></li>
</ul></dd>


<dt id="arg-visit-tbl">visit_tbl<a class="anchor" aria-label="anchor" href="#arg-visit-tbl"></a></dt>
<dd><p><em>tabular input</em> || defaults to <code>cdm_tbl('visit_occurrence')</code></p>
<p>The CDM table with visit information (i.e. visit_occurrence or encounter)</p></dd>


<dt id="arg-site-list">site_list<a class="anchor" aria-label="anchor" href="#arg-site-list"></a></dt>
<dd><p><em>list</em> || <strong>required</strong></p>
<p>A list of sites for which you would like to examine clinical facts. Can be one site
(single-site) or multiple (multi-site). Ensure that all sites listed here exist
in the provided cohort table.</p></dd>


<dt id="arg-visit-list">visit_list<a class="anchor" aria-label="anchor" href="#arg-visit-list"></a></dt>
<dd><p><em>string or vector</em> || defaults to <code>c('outpatient', 'inpatient')</code></p>
<p>A string or vector of visit types by which the output should be stratified. Each
visit type listed in this parameter should match an associated visit type defined
in the <code>visit_type_tbl</code></p></dd>


<dt id="arg-domain-tbl">domain_tbl<a class="anchor" aria-label="anchor" href="#arg-domain-tbl"></a></dt>
<dd><p><em>tabular input</em> || <strong>required</strong></p>
<p>A table that defines the fact domains to be investigated in the analysis. This
input should contain:</p><ul><li><p><code>domain</code> | <em>character</em> | a string label for the domain being examined (i.e. prescription drugs)</p></li>
<li><p><code>domain_tbl</code> | <em>character</em> | the CDM table where information for this domain can be found (i.e. drug_exposure)</p></li>
<li><p><code>filter_logic</code> | <em>character</em> | logic to be applied to the domain_tbl in order to achieve the definition of interest; should be written as if you were applying it in a dplyr::filter command in R</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function will return a list of dataframes with the median number of facts per
patient for all domains in <code>domain_tbl</code>, where each dataframe is specific to a
given visit type from <code>visit_list</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>

    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kaleigh Wieand, Kimberley Dickinson, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

