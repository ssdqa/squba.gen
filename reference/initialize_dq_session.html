<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Initialize argos Session for squba Analysis — initialize_dq_session • squba.gen</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Initialize argos Session for squba Analysis — initialize_dq_session"><meta name="description" content="This is a wrapper function that will create an argos session and set up
internal configurations that will allow all downstream functions to access
argos convenience functions. This step is REQUIRED, and makes it
easier to connect to a backend database to conduct analyses. The standard
argos workflow can also be used, but this wrapper is provided for convenience."><meta property="og:description" content="This is a wrapper function that will create an argos session and set up
internal configurations that will allow all downstream functions to access
argos convenience functions. This step is REQUIRED, and makes it
easier to connect to a backend database to conduct analyses. The standard
argos workflow can also be used, but this wrapper is provided for convenience."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">squba.gen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="external-link nav-link" href="https://ssdqa.github.io/squba/">squba Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ssdqa/squba.gen/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Initialize argos Session for squba Analysis</h1>
      <small class="dont-index">Source: <a href="https://github.com/ssdqa/squba.gen/blob/main/R/initialize_session.R" class="external-link"><code>R/initialize_session.R</code></a></small>
      <div class="d-none name"><code>initialize_dq_session.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a wrapper function that will create an argos session and set up
internal configurations that will allow all downstream functions to access
argos convenience functions. This step is <strong>REQUIRED</strong>, and makes it
easier to connect to a backend database to conduct analyses. The standard
argos workflow can also be used, but this wrapper is provided for convenience.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">initialize_dq_session</span><span class="op">(</span></span>
<span>  <span class="va">session_name</span>,</span>
<span>  <span class="va">db_conn</span>,</span>
<span>  is_json <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  working_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">file_subdirectory</span>,</span>
<span>  results_subdirectory <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">cdm_schema</span>,</span>
<span>  results_schema <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vocabulary_schema <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  results_tag <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cache_enabled <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  retain_intermediates <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  db_trace <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  default_file_output <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-session-name">session_name<a class="anchor" aria-label="anchor" href="#arg-session-name"></a></dt>
<dd><p><em>string</em> || <strong>required</strong></p>
<p>An arbitrary name to identify the session</p></dd>


<dt id="arg-db-conn">db_conn<a class="anchor" aria-label="anchor" href="#arg-db-conn"></a></dt>
<dd><p><em>string</em> / <em>database connection</em> || <strong>required</strong></p>
<p>Either a connection object used to connect to a relational database
(ex: the output of <code><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">DBI::dbConnect()</a></code>) OR a string indicating the path to
a JSON file with relevant connection information</p>
<p>This information will be used to connect to the CDM and access the data
indicated by the user for each analysis</p></dd>


<dt id="arg-is-json">is_json<a class="anchor" aria-label="anchor" href="#arg-is-json"></a></dt>
<dd><p><em>boolean</em> || defaults to <code>FALSE</code></p>
<p>A boolean indicating whether <code>db_conn</code> is a database connection object (<code>FALSE</code>)
or the path to a JSON file with connection details (<code>TRUE</code>)</p></dd>


<dt id="arg-working-directory">working_directory<a class="anchor" aria-label="anchor" href="#arg-working-directory"></a></dt>
<dd><p><em>string</em> || defaults to the result of <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">base::getwd()</a></code></p>
<p>The base directory in which the analysis is taking place</p>
<p>It is expected that both the file &amp; results subdirectories are directories
downstream of this base directory.</p></dd>


<dt id="arg-file-subdirectory">file_subdirectory<a class="anchor" aria-label="anchor" href="#arg-file-subdirectory"></a></dt>
<dd><p><em>string</em> || <strong>required</strong></p>
<p>The <em>subdirectory</em> within the working_directory where all files to be used
in the analysis (i.e. concept sets) are kept. Only the name of this directory
needs to be supplied here, not the full file path including the working_directory.</p>
<p>This parameter sets a default file location so the <code>squba</code> functions can easily
read in relevant files without having to redefine the path each time.</p></dd>


<dt id="arg-results-subdirectory">results_subdirectory<a class="anchor" aria-label="anchor" href="#arg-results-subdirectory"></a></dt>
<dd><p><em>string</em> || defaults to <code>NULL</code></p>
<p>The <em>subdirectory</em> within the base directory where any results should be output
(if file = TRUE when using <code>argos::output_tbl</code>). Only the name of this directory
needs to be supplied here, not the full file path including the working_directory.</p></dd>


<dt id="arg-cdm-schema">cdm_schema<a class="anchor" aria-label="anchor" href="#arg-cdm-schema"></a></dt>
<dd><p><em>string</em> || <strong>required</strong></p>
<p>The name of the schema where the data in a CDM format is kept. This location
must exist within the database identified in <code>db_conn</code></p></dd>


<dt id="arg-results-schema">results_schema<a class="anchor" aria-label="anchor" href="#arg-results-schema"></a></dt>
<dd><p><em>string</em> || defaults to <code>NULL</code></p>
<p>The name of the schema on the database where results should be output
(if file = FALSE when using <code>argos::output_tbl</code>). This is also the location
from which results can be retrieved if using <code>argos::results_tbl</code></p></dd>


<dt id="arg-vocabulary-schema">vocabulary_schema<a class="anchor" aria-label="anchor" href="#arg-vocabulary-schema"></a></dt>
<dd><p><em>string</em> || defaults to <code>NULL</code></p>
<p>The name of the schema on the database where any vocabulary reference tables
(like the OMOP concept table) are kept</p></dd>


<dt id="arg-results-tag">results_tag<a class="anchor" aria-label="anchor" href="#arg-results-tag"></a></dt>
<dd><p><em>string</em> || defaults to <code>NULL</code></p>
<p>An arbitrary suffix that will be appended onto the names of any result
tables output using <code>argos::output_tbl</code>. This feature can be helpful if
you are re-running analysis and want to make sure the tables are uniquely
identified.</p></dd>


<dt id="arg-cache-enabled">cache_enabled<a class="anchor" aria-label="anchor" href="#arg-cache-enabled"></a></dt>
<dd><p><em>boolean</em> || defaults to <code>FALSE</code></p>
<p>A boolean value indicating whether repeated attempts to load the same
codeset (via <code>argos::load_codeset</code>) should use a cached value rather than
reloading</p></dd>


<dt id="arg-retain-intermediates">retain_intermediates<a class="anchor" aria-label="anchor" href="#arg-retain-intermediates"></a></dt>
<dd><p><em>boolean</em> || defaults to <code>FALSE</code></p>
<p>A boolean indicating whether intermediate/temporary tables should be
manifested and retained on the database (in the defined <code>results_schema</code>)
or remain as temporary objects</p></dd>


<dt id="arg-db-trace">db_trace<a class="anchor" aria-label="anchor" href="#arg-db-trace"></a></dt>
<dd><p><em>boolean</em> || defaults to <code>TRUE</code></p>
<p>A boolean indicating whether the query log printed in the console should
include detailed information about execution of SQL queries in the database.
This is essentially a "verbose" parameter controlling how much information
you want to see about certain queries being executed.</p></dd>


<dt id="arg-default-file-output">default_file_output<a class="anchor" aria-label="anchor" href="#arg-default-file-output"></a></dt>
<dd><p><em>boolean</em> || defaults to <code>FALSE</code></p>
<p>A boolean indicating whether <code>argos::output_tbl</code> should output a file
by default or if it should just output the <code>results_schema</code> on the database.</p>
<p>This can also be controlled at the function level, but this is an option for
a global setting if you would like local, CSV copies of all your results.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function will quietly load all exported argos functions into the
environment and establish the necessary configurations to allow them to
operate. Note that the argos session itself will NOT appear in the global
environment.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a database connection with DBI or input a file path</span></span></span>
<span class="r-in"><span><span class="co">## to a json file with connection details</span></span></span>
<span class="r-in"><span><span class="va">conn_dbi</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span>drv <span class="op">=</span> <span class="fu">my_driver_func</span><span class="op">(</span><span class="op">)</span>, <span class="co"># insert appropriate driver</span></span></span>
<span class="r-in"><span>                           dbname <span class="op">=</span> <span class="st">"my_dbname"</span>,</span></span>
<span class="r-in"><span>                           host <span class="op">=</span> <span class="st">"my_host"</span>,</span></span>
<span class="r-in"><span>                           port <span class="op">=</span> <span class="st">"my_port"</span>,</span></span>
<span class="r-in"><span>                           user <span class="op">=</span> <span class="st">"my_username"</span>,</span></span>
<span class="r-in"><span>                           password <span class="op">=</span> <span class="st">"my_password"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">conn_json</span> <span class="op">&lt;-</span> <span class="st">"path/to/connection/file"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Establish session and load appropriate convenience functions &amp;</span></span></span>
<span class="r-in"><span><span class="co">## configurations into the environment</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">initialize_dq_session</span><span class="op">(</span>session_name <span class="op">=</span> <span class="st">"my_session"</span>,</span></span>
<span class="r-in"><span>                      db_conn <span class="op">=</span> <span class="va">conn_dbi</span>,</span></span>
<span class="r-in"><span>                      is_json <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                      working_directory <span class="op">=</span> <span class="fu">get_wd</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      file_subdirectory <span class="op">=</span> <span class="st">"my_files"</span>,</span></span>
<span class="r-in"><span>                      cdm_schema <span class="op">=</span> <span class="st">"my_schema"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kaleigh Wieand, Kimberley Dickinson, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

